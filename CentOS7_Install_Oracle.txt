※ 참고 : https://confluence.curvc.com/pages/viewpage.action?pageId=11927710

1. 패키지 설치
 - # yum update
 - # yum install -y binutils compat-lipcap1 gcc gcc-c++ glibc glibc-devel ksh compat-libstdc++-33 libaio libaio-devel libgcc libstdc++ libstdc++-devel libXi libXtst make sysstat xorg-x11-apps
2. Group과 User 생성
 - # groupadd oinstall
 - # groupadd dba
 - # useradd -g oinstall -G dba oracle
 - # passwd oracle --> smcs
3. Oracle 계정의 Oracle의 Base 디렉토리 생성 및 환경 변수 설정
 - # cd /home/oracle
 - # mkdir db
 - # chown -R oracle:oinstall db   --> db에 대한 소유자를 oracle 그룹명을 oinstall로 변경
 - # chmod -R 775 db
 - # chmod g+s db
 - # vi /home/oracle/.bash_profile
    ...
    export TMP=/tmp
    export TMPDIR=/tmp
    export ORACLE_BASE=/home/oracle/db
    export ORACLE_SID=dcol
    export ORACLE_HOME=$ORACLE_BASE/product/12.1.0/dbhome_1
    export ORACLE_HOME_LISTNER=$ORACLE_HOME/bin/lsnrctl
    export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib
    PATH=$PATH:$HOME/.local/bin:$HOME/bin
    export PATH=$ORACLE_HOME/bin:$PATH
4. 커널 수정
 - # vi /etc/sysctl.conf
    ...
    fs.aio-max-nr = 1048576
    fs.file-max = 6815744
    kernel.shmall = 2097152
    kernel.shmmax = 1987162112
    kernel.shmmni = 4096
    kernel.sem = 250 32000 100 128
    net.ipv4.ip_local_port_range = 9000 65500
    net.core.rmem_default = 262144
    net.core.rmem_max = 4194304
    net.core.wmem_default = 262144
    net.core.wmem_max = 1048586
 - # sysctl -p    --> 커널 수정한 내용 적용 및 확인
5. oracle 계정의 shell limit를 설정
 - # vi /etc/security/limits.conf
   ...
   oracle soft nproc 2047
   oracle hard nproc 16384
   oracle soft nofile 1024
   oracle hard nofile 65536
6. Oracle Install
 - # unzip linuxx64_12201_database.zip
 - # su - oracle
 - # cd /home/oracle/database
7. Oracle Install
 - # ./runinstaller
 - 화면에 GUI 화면이 안 나타나면 oracle 서버(X11 클라이언트)에서 아래와 같이 실행함
   . $ export DISPLAY=:0.0
   . $ echo $DISPLAY
   . $ xhost +
   . $ xclock
 - 보안 문제에 대한 정보를 메일로 수신하지 않기 때문에 언 체크하고 Next
 - Create and configure a database 선택하고 Next
 - Server class 선택하고 Next
 - Single instance database installation 선택하고 Next
 - Adbanced install 선택하고 Next
 - Enterprise Edition 선택하고 Next
 - Oracle base : /home/oracle/db
   Software location : /home/oracle/db/product/12.1.0/dbhome_1 입력하고 Next
 - Invetory Directory : /home/oracle/orainventory 입력하고 Next
 - Genera Purpose / Transaction Processing 선택하고 Next
 - 오라클 글로벌 이름과 SID, Pluggable 이름을 입력 후 Next
   . Global database name : dcol, Oracle system identifier (SID) : dcol
   . Create as Container database 체크, Pluggable database name : dcolpdb
 - 메모리 탭에서 자동 메모리 설정을 언 체크를 하고 메모리 사이즈를 설정하고 Next
   . Enable Automatic Memory Management 언 체크
   . Allocate memory : 38 GB 
 - Character sets 탭에서 AL32UTF8 설정하고 Next
 - File system Specify database file location: /home/oracle/db/oradata 입력 후 Next
 - Register with Enterprise Manager (EM) Cloud Control 언 체크 후 Next
 - Enable Recovery 언 체크 후 Next
 - Use the same password for all accounts 체크 후 (SYS, SYSTEM, PDBA) Password : smcs 입력 후 Next
 - Privileged Operating System groups 그냥 Next 
 - 전체 조건 검사 수행 시 최대 스택 사이즈가 다릅니다. 메시지가 나타나면
   . ulimit -s로 stack size 확인
   . ulimit -s 10240 입력하여 stack size 늘려 줌
 - Summary 화면에서 Install 클릭
 - 설치 진행중 스크립트 실행
   . # /home/oracle/oraInventory/orainstRoot.sh
   . # /home/oracle/db/product/12.1.0/dbhome_1/root.sh
 - 설치가 완료되면 GUI 닫기
 - 터미널에서 oracle 계정 접속
   . sqlplus -version
   . sqlplus / as sysdba
     select instance_name, status from v$instance;
     
8. 외부에서 접속 테스트
 - 외부 PC에서 sqlplus 수행
   . sqlplus system/smcs@192.168.1.52:1521/dcol
   
 -  포트 추가 (접속이 안되면)
   . firewall-cmd --permanent --zone=public --add-port=1521/tcp
   . firewall-cmd --reload
   
   

 
 
   
   
 
 



   
   
   
   
   
   

 
